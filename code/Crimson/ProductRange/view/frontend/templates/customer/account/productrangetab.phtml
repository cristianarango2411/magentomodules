<h1>Comienzo de PHTML</h1>


<script type="text/javascript">
    require(["jquery"],function($) {
        $(document).ready(function() {
            $('#productsRangeForm').submit(function(event) {
                event.preventDefault();
                if( true){//!$(this).attr( "novalidate" )==='novalidate'){
                    var customurl = "<?php echo $this->getUrl().'productrangetab/customer/range/'?>";
                    $.ajax({
                        url: customurl,
                        type: 'POST',
                        dataType: 'json',
                        data: {
                            lowRange: $( "#lowRange" ).val(),
                            highRange: $( "#highRange" ).val(),
                            sortByPrice: $( "#sortByPrice" ).val(),
                        },
                        complete: function(response) {             
                            productList = response.responseJSON;        
                            console.log(productList);   
                        },
                        error: function (xhr, status, errorThrown) {
                            console.log('Error happens. Try again.');
                        }
                    });
                }
            });
        });
    });
</script>


<form class="form" id="productsRangeForm" method="post" data-mage-init='{"validation":{"rules": {"field-4": {"required":true}}}}'>
    <fieldset class="fieldset">
        <div class="field name required">
            <label class="label" for="lowRange"><span>Low Range</span></label>
            <div class="control">
                <input name="lowRange" id="lowRange" title="Low Range" value=""  class="input-text" type="number" data-validate='{"required":true, "number": true}'/>
            </div>
        </div>
        <div class="field name required">
            <label class="label" for="highRange"><span>High Range</span></label>
            <div class="control">
                <input name="highRange" id="highRange" title="High Range" value="" class="input-text" type="number" data-validate='{"required":true, "number": true}'/>
            </div>
        </div>
        <div class="field name required">
            <label class="label" for="field-3"><span>Sort By Price</span></label>
            <field name="sortByPrice" id="sortByPrice" formElement="select">
                <formElements>
                    <select>
                        <settings>
                            <options>
                                <option name="1" xsi:type="array">
                                    <item name="value" xsi:type="string">1</item>
                                    <item name="label" xsi:type="string">Ascending</item>
                                </option>
                                <option name="2" xsi:type="array">
                                    <item name="value" xsi:type="string">2</item>
                                    <item name="label" xsi:type="string">Descending</item>
                                </option>
                            </options>
                            <caption>-- Please Select --</caption>
                        </settings>
                    </select>
                </formElements>
            </field>
        </div>
    </fieldset>
    <div class="actions-toolbar">
        <div class="primary">
            <button type="submit" title="Submit" class="action submit primary">
                <span>Submit</span>
            </button>
        </div>
    </div>
</form>




<?php 


/*$productCollection = $block->getProductCollection(10);
foreach ($productCollection as $product) {
    print_r($product->getData());     
    echo "<br><br><br>";
}*/


// Add your tab content here.
//echo "Products in Range tab content goes here";

$foo="v1.0";
?>
<h2>Fin PHTML <?=$foo?></h2>
